# NodeMind 着色效果检查工具使用说明

## 概述

`test-coloring-check.html` 是一个专门用于检查NodeMind思维导图标签着色功能的诊断工具。它可以帮助您快速识别着色功能是否正常工作。

## 使用方法

### 1. 打开检查工具

在浏览器中打开主页面 `index.html`，然后在新标签页中打开 `test-coloring-check.html`。

### 2. 检查步骤

按照页面上的步骤依次进行检查：

#### 步骤1：检查主页面连接状态
- 点击"检查连接"按钮
- 确认与主页面的通信正常

#### 步骤2：获取节点数据
- 点击"获取数据"按钮
- 查看节点数量和标签信息

#### 步骤3：检查着色配置
- 点击"检查配置"按钮
- 确认着色规则配置正确

#### 步骤4：测试着色效果
- 点击"测试着色"按钮
- 查看着色处理结果

#### 步骤5：查看当前节点样式
- 点击"查看样式"按钮
- 确认节点是否已正确着色

### 3. 颜色样本参考

页面底部显示了各种标签的预期颜色效果：

- **项目标签**：浅蓝色背景，黑色粗体字
- **进行中标签**：浅红色背景，黑色字
- **完成标签**：浅绿色背景，黑色字
- **计划标签**：浅棕色背景，黑色字

## 故障排除

### 常见问题

1. **连接失败**
   - 确保主页面 `index.html` 已经打开
   - 检查两个页面是否在同一个域名下

2. **获取数据失败**
   - 确认主页面已经加载了思维导图数据
   - 检查 `nodeDatabase` 是否存在

3. **着色不生效**
   - 检查节点是否有正确的标签
   - 确认标签名称与配置匹配
   - 验证思维导图实例是否正常

### 调试信息

检查工具会在浏览器控制台输出详细的调试信息，包括：
- 消息通信状态
- 节点数据详情
- 着色处理过程
- 错误信息

## 技术细节

### 消息通信协议

检查工具使用 `postMessage` API 与主页面通信，支持以下消息类型：

- `ping/pong`：连接测试
- `get_node_database`：获取节点数据
- `get_coloring_config`：获取着色配置
- `test_coloring`：执行着色测试
- `get_current_styles`：获取当前样式

### 着色规则

当前支持的标签着色规则：

```javascript
const tagStyles = {
    '项目': { backgroundColor: '#e3f2fd', color: 'black', fontWeight: 'bold' },
    '进行中': { backgroundColor: '#ffebee', color: 'black' },
    '完成': { backgroundColor: '#e8f5e8', color: 'black' },
    '计划': { backgroundColor: '#fff3e0', color: 'black' }
};
```

## 注意事项

1. 此工具仅用于诊断和检查，不会修改您的思维导图数据
2. 请确保在主页面加载完成后再使用此工具
3. 如果遇到问题，请查看浏览器控制台的详细错误信息
4. 建议在Chrome或Firefox等现代浏览器中使用

## 更新日志

- **v1.0**：初始版本，支持基本的着色效果检查功能
- 支持连接测试、数据获取、配置检查、着色测试和样式查看
- 提供详细的调试信息和错误处理 