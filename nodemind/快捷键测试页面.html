<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jsMind å¿«æ·é”®æµ‹è¯•é¡µé¢</title>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsmind@0.8.7/style/jsmind.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jsmind@0.8.7/es6/jsmind.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jsmind@0.8.7/es6/jsmind.draggable-node.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 20px;
            background: #f5f7fa;
        }
        
        .test-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-info {
            padding: 20px;
            background: #e8f4fd;
            border-left: 4px solid #2196f3;
            margin: 20px;
            border-radius: 6px;
        }
        
        .test-info h3 {
            margin: 0 0 15px 0;
            color: #1976d2;
        }
        
        .shortcut-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .shortcut-item {
            background: rgba(255,255,255,0.8);
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        
        .shortcut-key {
            font-weight: bold;
            color: #d32f2f;
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        #jsmind_container {
            width: 100%;
            height: 400px;
            background: #fff;
            border-top: 1px solid #ddd;
        }
        
        .status {
            background: #2c3e50;
            color: white;
            padding: 10px 20px;
            font-size: 12px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="header">
            <h1>ğŸ§ª jsMind å¿«æ·é”®æµ‹è¯•</h1>
            <p>æµ‹è¯•æ–°çš„ Ctrl+Enter å¿«æ·é”®åŠŸèƒ½</p>
        </div>
        
        <div class="test-info">
            <h3>ğŸ® å¿«æ·é”®æµ‹è¯•è¯´æ˜</h3>
            <p><strong>ä¸»è¦å˜æ›´ï¼š</strong>æ·»åŠ å­èŠ‚ç‚¹çš„å¿«æ·é”®å·²ä» <del>Insert</del> æ”¹ä¸º <span class="shortcut-key">Ctrl+Enter</span></p>
            
            <div class="shortcut-list">
                <div class="shortcut-item">
                    <strong>ğŸ†• <span class="shortcut-key">Ctrl+Enter</span></strong><br>
                    æ·»åŠ å­èŠ‚ç‚¹ï¼ˆæ–°å¿«æ·é”®ï¼‰
                </div>
                <div class="shortcut-item">
                    <strong><span class="shortcut-key">Enter</span></strong><br>
                    æ·»åŠ å…„å¼ŸèŠ‚ç‚¹
                </div>
                <div class="shortcut-item">
                    <strong><span class="shortcut-key">F2</span></strong><br>
                    ç¼–è¾‘èŠ‚ç‚¹å†…å®¹
                </div>
                <div class="shortcut-item">
                    <strong><span class="shortcut-key">Delete</span></strong><br>
                    åˆ é™¤é€‰ä¸­èŠ‚ç‚¹
                </div>
                <div class="shortcut-item">
                    <strong><span class="shortcut-key">Space</span></strong><br>
                    å±•å¼€/æ”¶èµ·èŠ‚ç‚¹
                </div>
                <div class="shortcut-item">
                    <strong><span class="shortcut-key">Ctrl+H</span></strong><br>
                    æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
                </div>
            </div>
            
            <p style="margin-top: 15px;"><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p>
            <ol style="margin: 10px 0;">
                <li>ç‚¹å‡»é€‰ä¸­ä»»æ„èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹ä¼šæœ‰è“è‰²è¾¹æ¡†ï¼‰</li>
                <li>æŒ‰ä¸‹ <span class="shortcut-key">Ctrl+Enter</span> ç»„åˆé”®</li>
                <li>è§‚å¯Ÿæ˜¯å¦æˆåŠŸæ·»åŠ äº†å­èŠ‚ç‚¹</li>
                <li>å°è¯•å…¶ä»–å¿«æ·é”®åŠŸèƒ½</li>
            </ol>
        </div>
        
        <div id="jsmind_container"></div>
        
        <div class="status">
            æŒ‰ <span class="shortcut-key">Ctrl+H</span> æ˜¾ç¤ºå®Œæ•´å¿«æ·é”®å¸®åŠ© | é€‰ä¸­èŠ‚ç‚¹åæŒ‰ <span class="shortcut-key">Ctrl+Enter</span> æ·»åŠ å­èŠ‚ç‚¹
        </div>
    </div>

    <script type="text/javascript">
        // æµ‹è¯•ç”¨çš„ç®€å•æ€ç»´å¯¼å›¾æ•°æ®
        var testMind = {
            meta: {
                name: "å¿«æ·é”®æµ‹è¯•",
                author: "Test",
                version: "1.0"
            },
            format: "node_tree",
            data: {
                id: "root",
                topic: "ğŸ§ª å¿«æ·é”®æµ‹è¯•",
                children: [
                    {
                        id: "test1",
                        topic: "é€‰ä¸­æˆ‘æµ‹è¯• Ctrl+Enter",
                        direction: "right"
                    },
                    {
                        id: "test2", 
                        topic: "æˆ–è€…é€‰ä¸­æˆ‘æµ‹è¯•",
                        direction: "right"
                    }
                ]
            }
        };

        // jsMind é…ç½®
        var options = {
            container: 'jsmind_container',
            editable: true,
            theme: 'primary',
            view: {
                engine: 'canvas',
                hmargin: 100,
                vmargin: 50,
                line_width: 2,
                line_color: '#566'
            },
            layout: {
                hspace: 30,
                vspace: 20,
                pspace: 13
            },
            shortcut: {
                enable: true,
                handles: {},
                mapping: {
                    addchild: 4096 + 13,  // Ctrl+Enter æ·»åŠ å­èŠ‚ç‚¹ ğŸ†•
                    addbrother: 13,      // Enter æ·»åŠ å…„å¼ŸèŠ‚ç‚¹
                    editnode: 113,       // F2 ç¼–è¾‘èŠ‚ç‚¹
                    delnode: 46,         // Delete åˆ é™¤èŠ‚ç‚¹
                    toggle: 32,          // Space å±•å¼€/æ”¶èµ·
                    left: 37, up: 38, right: 39, down: 40
                }
            }
        };

        // åˆ›å»ºjsMindå®ä¾‹
        var jm = new jsMind(options);
        jm.show(testMind);
        jm.enable_draggable_node();

        // ç›‘å¬äº‹ä»¶
        jm.add_event_listener(function(type, data) {
            if (type === 'select_node') {
                console.log('âœ… é€‰ä¸­èŠ‚ç‚¹:', data.node.topic);
            } else if (type === 'add_node') {
                console.log('ğŸ†• æ·»åŠ èŠ‚ç‚¹:', data.node.topic);
                alert('âœ… æˆåŠŸï¼Ctrl+Enter å¿«æ·é”®å·¥ä½œæ­£å¸¸\næ–°æ·»åŠ çš„èŠ‚ç‚¹: ' + data.node.topic);
            } else if (type === 'edit_node') {
                console.log('âœï¸ ç¼–è¾‘èŠ‚ç‚¹:', data.node.topic);
            } else if (type === 'remove_node') {
                console.log('ğŸ—‘ï¸ åˆ é™¤èŠ‚ç‚¹:', data.node.topic);
            }
        });

        // å¿«æ·é”®å¸®åŠ©
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                alert('ğŸ® jsMind å¿«æ·é”®å¸®åŠ©\n\nğŸ†• ä¸»è¦æ›´æ–°:\nâ€¢ Ctrl+Enter - æ·»åŠ å­èŠ‚ç‚¹ï¼ˆæ–°å¿«æ·é”®ï¼‰\n\nğŸ“‹ å®Œæ•´å¿«æ·é”®åˆ—è¡¨:\nâ€¢ Ctrl+Enter - æ·»åŠ å­èŠ‚ç‚¹\nâ€¢ Enter - æ·»åŠ å…„å¼ŸèŠ‚ç‚¹\nâ€¢ F2 - ç¼–è¾‘èŠ‚ç‚¹å†…å®¹\nâ€¢ Delete - åˆ é™¤èŠ‚ç‚¹\nâ€¢ Space - å±•å¼€/æ”¶èµ·èŠ‚ç‚¹\nâ€¢ æ–¹å‘é”® - é€‰æ‹©ç›¸é‚»èŠ‚ç‚¹\nâ€¢ Ctrl+H - æ˜¾ç¤ºæ­¤å¸®åŠ©\n\nğŸ–±ï¸ é¼ æ ‡æ“ä½œ:\nâ€¢ å•å‡» - é€‰ä¸­èŠ‚ç‚¹\nâ€¢ åŒå‡» - ç¼–è¾‘èŠ‚ç‚¹\nâ€¢ æ‹–æ‹½ - ç§»åŠ¨èŠ‚ç‚¹ç»“æ„');
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.addEventListener('load', function() {
            console.log('ğŸ§ª å¿«æ·é”®æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“ æµ‹è¯•è¯´æ˜: é€‰ä¸­èŠ‚ç‚¹åæŒ‰ Ctrl+Enter æ·»åŠ å­èŠ‚ç‚¹');
            
            // 3ç§’åæ˜¾ç¤ºæç¤º
            setTimeout(function() {
                if (confirm('ğŸ¯ å¼€å§‹å¿«æ·é”®æµ‹è¯•ï¼Ÿ\n\nç‚¹å‡»"ç¡®å®š"æŸ¥çœ‹æµ‹è¯•è¯´æ˜')) {
                    alert('ğŸ“‹ æµ‹è¯•æ­¥éª¤:\n\n1ï¸âƒ£ ç‚¹å‡»ä»»æ„èŠ‚ç‚¹é€‰ä¸­å®ƒ\n2ï¸âƒ£ æŒ‰ä¸‹ Ctrl+Enter ç»„åˆé”®\n3ï¸âƒ£ è§‚å¯Ÿæ˜¯å¦æ·»åŠ äº†å­èŠ‚ç‚¹\n4ï¸âƒ£ å°è¯•å…¶ä»–å¿«æ·é”®\n\nğŸ’¡ æç¤º: æŒ‰ Ctrl+H å¯éšæ—¶æŸ¥çœ‹å¸®åŠ©');
                }
            }, 1000);
        });
    </script>
</body>
</html> 