# jsMind 拖拽功能使用说明

## 🎉 新功能概述

我们已经成功为您的 jsMind 思维导图项目添加了**节点拖拽功能**！现在您可以通过鼠标拖拽的方式轻松重新组织思维导图的结构。

## 📁 文件更新说明

### 已更新的文件：

1. **`jsmind-demo.html`** - CDN版本，支持拖拽功能
2. **`jsmind-local.html`** - 本地版本，支持拖拽功能

### 新增备份文件：

3. **`jsmind-demo-backup.html`** - 原始版本备份，方便回退

## 🔧 技术实现

### 新增的插件引入：
```html
<!-- CDN版本 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jsmind@0.8.7/es6/jsmind.draggable-node.js"></script>

<!-- 本地版本 -->
<script type="text/javascript" src="./node_modules/jsmind/es6/jsmind.draggable-node.js"></script>
```

### 启用拖拽功能：
```javascript
// 创建jsMind实例后启用拖拽
var jm = new jsMind(options);
jm.show(mindData);
jm.enable_draggable_node(); // 启用拖拽功能
```

## 🖱️ 拖拽操作方法

### 基本拖拽步骤：

1. **选择源节点**：将鼠标悬停在要移动的节点上
2. **按住左键**：按住鼠标左键开始拖拽
3. **移动到目标**：将节点拖拽到目标节点上
4. **释放鼠标**：松开鼠标左键完成移动

### 拖拽效果：

- 被拖拽的节点会成为目标节点的**子节点**
- 支持**跨分支拖拽**（左右分支间移动）
- 拖拽过程中有**实时视觉反馈**
- 完成后**自动重新排列布局**

## 🎮 新增控制功能

### 拖拽开关按钮：

- **🔀 禁用拖拽** / **🔀 启用拖拽**
- 可以随时开启或关闭拖拽功能
- 状态栏实时显示拖拽状态

### 状态栏信息：

- **当前主题**：显示正在使用的主题
- **选中节点**：显示当前选中的节点
- **拖拽状态**：显示拖拽功能开启/关闭状态

## 📖 完整操作指南

### 🖱️ 鼠标操作

| 操作 | 功能 |
|-----|------|
| 单击节点 | 选中节点 |
| 双击节点 | 编辑节点内容 |
| 拖拽节点 | **重新组织结构** |
| 拖拽画布 | 移动整个视图 |
| 滚轮 | 缩放思维导图 |

### ⌨️ 快捷键

| 按键 | 功能 |
|-----|------|
| Ctrl+Enter | 添加子节点 |
| Enter | 添加兄弟节点 |
| F2 | 编辑节点内容 |
| Delete | 删除选中节点 |
| Space | 展开/收起节点 |
| 方向键 | 选择相邻节点 |
| Ctrl+H | 显示帮助信息 |

### 🔀 拖拽功能详解

| 特性 | 说明 |
|-----|------|
| 拖拽范围 | 可以拖拽任意非根节点 |
| 目标范围 | 可以拖拽到任意节点下 |
| 跨分支支持 | ✅ 支持左右分支间移动 |
| 嵌套支持 | ✅ 支持多层嵌套拖拽 |
| 视觉反馈 | ✅ 实时拖拽预览 |
| 布局调整 | ✅ 自动重新排列 |

## 🎨 界面改进

### 新的UI设计：

- **渐变背景**：更美观的视觉效果
- **图标按钮**：每个按钮都有对应的emoji图标
- **状态栏**：实时显示操作状态
- **拖拽提示**：明确的操作指导
- **响应式设计**：支持移动端操作

### 主题系统：

- **15种内置主题**：primary, success, warning, danger, info, etc.
- **动态切换**：点击按钮循环切换主题
- **实时反馈**：状态栏显示当前主题

## 🚀 使用建议

### 最佳实践：

1. **先体验基本功能**：熟悉节点的增删改查
2. **尝试拖拽操作**：从简单的移动开始
3. **探索跨分支拖拽**：体验更复杂的结构调整
4. **使用主题切换**：找到最喜欢的视觉风格
5. **导出数据**：保存您的思维导图结构

### 常见场景：

- **项目规划**：通过拖拽调整任务优先级
- **知识整理**：重新组织知识点分类
- **会议记录**：调整议题层次结构
- **学习笔记**：优化知识框架

## 🔧 开发者信息

### 版本信息：
- **jsMind版本**：v0.8.7
- **拖拽插件**：jsmind.draggable-node.js
- **支持浏览器**：Chrome, Firefox, Safari, Edge

### 技术特性：
- **纯JavaScript实现**：无需其他依赖
- **HTML5 Canvas渲染**：高性能图形显示
- **事件驱动架构**：完整的事件监听支持
- **模块化设计**：插件可选加载

## 🆘 故障排除

### 常见问题：

**Q: 拖拽功能不工作？**
A: 确保已引入 `jsmind.draggable-node.js` 文件并调用了 `enable_draggable_node()` 方法

**Q: 节点无法拖拽到某些位置？**
A: 根节点不能被拖拽，也不能拖拽节点到其自身的子节点下

**Q: 拖拽后布局混乱？**
A: 可以尝试刷新页面或点击展开/收起按钮重新排列

**Q: 在移动端无法拖拽？**
A: 移动端支持触摸拖拽，确保使用触摸操作而非点击

## 📞 技术支持

如果您在使用过程中遇到任何问题，可以：

1. **查看控制台日志**：按F12打开开发者工具查看错误信息
2. **检查文件路径**：确保所有js和css文件路径正确
3. **测试浏览器兼容性**：推荐使用Chrome或Firefox最新版本
4. **参考官方文档**：访问 [jsMind官网](https://hizzgdev.github.io/jsmind/)

## 🎯 下一步计划

可以考虑的功能扩展：

- **节点样式自定义**：支持更丰富的节点外观
- **数据持久化**：自动保存思维导图到本地存储
- **协作功能**：多人实时编辑支持
- **导入导出**：支持更多格式（XMind, FreeMind等）
- **快捷操作**：右键菜单、批量操作等

---

**享受使用新的拖拽功能来创建更灵活的思维导图吧！** 🎉 