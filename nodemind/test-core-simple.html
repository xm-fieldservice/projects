<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NodeMind V4 æ ¸å¿ƒæ¶æ„æµ‹è¯• (ç®€åŒ–ç‰ˆ)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-section h3 {
            margin: 0 0 15px 0;
            color: #4facfe;
            font-size: 1.3em;
        }
        
        .button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: transform 0.2s;
        }
        
        .button:hover {
            transform: translateY(-2px);
        }
        
        .status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            background: #2d3748;
            color: #e2e8f0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stat-card h4 {
            margin: 0 0 10px 0;
            color: #4facfe;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3748;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ NodeMind V4</h1>
            <p>æ ¸å¿ƒæ¶æ„æµ‹è¯• (ç®€åŒ–ç‰ˆ) - ä¸ä¾èµ–ES6æ¨¡å—</p>
        </div>
        
        <div class="content">
            <!-- ç³»ç»Ÿåˆå§‹åŒ–æµ‹è¯• -->
            <div class="test-section">
                <h3>ğŸ—ï¸ ç³»ç»Ÿåˆå§‹åŒ–æµ‹è¯•</h3>
                <button class="button" onclick="initializeSystem()">åˆå§‹åŒ–æ ¸å¿ƒç³»ç»Ÿ</button>
                <button class="button" onclick="getSystemStatus()">è·å–ç³»ç»ŸçŠ¶æ€</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="initProgress"></div>
                </div>
                <div class="status" id="initStatus">ç­‰å¾…åˆå§‹åŒ–...</div>
            </div>
            
            <!-- æ•°æ®å­˜å‚¨æµ‹è¯• -->
            <div class="test-section">
                <h3>ğŸ’¾ æ•°æ®å­˜å‚¨æµ‹è¯•</h3>
                <button class="button" onclick="testDataStore()">æµ‹è¯•æ•°æ®æ“ä½œ</button>
                <button class="button" onclick="createTestNodes()">åˆ›å»ºæµ‹è¯•èŠ‚ç‚¹</button>
                <button class="button" onclick="queryNodes()">æŸ¥è¯¢èŠ‚ç‚¹</button>
                <div class="status" id="dataStatus">ç­‰å¾…æµ‹è¯•...</div>
            </div>
            
            <!-- äº‹ä»¶æ€»çº¿æµ‹è¯• -->
            <div class="test-section">
                <h3>ğŸšŒ äº‹ä»¶æ€»çº¿æµ‹è¯•</h3>
                <button class="button" onclick="testEventBus()">æµ‹è¯•äº‹ä»¶ç³»ç»Ÿ</button>
                <button class="button" onclick="enableEventDebug()">å¯ç”¨äº‹ä»¶è°ƒè¯•</button>
                <button class="button" onclick="getEventStats()">è·å–äº‹ä»¶ç»Ÿè®¡</button>
                <div class="status" id="eventStatus">ç­‰å¾…æµ‹è¯•...</div>
            </div>
            
            <!-- æ¨¡å—ç®¡ç†æµ‹è¯• -->
            <div class="test-section">
                <h3>ğŸ”§ æ¨¡å—ç®¡ç†æµ‹è¯•</h3>
                <button class="button" onclick="registerTestModule()">æ³¨å†Œæµ‹è¯•æ¨¡å—</button>
                <button class="button" onclick="loadTestModule()">åŠ è½½æµ‹è¯•æ¨¡å—</button>
                <button class="button" onclick="getModuleStatus()">è·å–æ¨¡å—çŠ¶æ€</button>
                <div class="status" id="moduleStatus">ç­‰å¾…æµ‹è¯•...</div>
            </div>
            
            <!-- ç³»ç»Ÿç»Ÿè®¡ -->
            <div class="stats-grid" id="statsGrid">
                <!-- ç»Ÿè®¡å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // ==================== å†…è”æ ¸å¿ƒç³»ç»Ÿ (ç®€åŒ–ç‰ˆ) ====================
        
        // ç®€åŒ–çš„æ•°æ®å­˜å‚¨
        class SimpleDataStore {
            constructor() {
                this.nodes = new Map();
                this.observers = new Set();
                this.nodeCounter = 0;
            }
            
            createNode(data) {
                const nodeId = `node_${++this.nodeCounter}`;
                const node = {
                    id: nodeId,
                    ...data,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                this.nodes.set(nodeId, node);
                this._notify({ type: 'create', target: nodeId, data: node });
                return nodeId;
            }
            
            updateNode(nodeId, updates) {
                const node = this.nodes.get(nodeId);
                if (!node) return false;
                
                const updatedNode = {
                    ...node,
                    ...updates,
                    updatedAt: new Date().toISOString()
                };
                
                this.nodes.set(nodeId, updatedNode);
                this._notify({ type: 'update', target: nodeId, data: updatedNode });
                return true;
            }
            
            getNode(nodeId) {
                return this.nodes.get(nodeId);
            }
            
            queryNodes(filter = {}) {
                const results = [];
                for (const [id, node] of this.nodes) {
                    let match = true;
                    
                    if (filter.tags && node.tags) {
                        const hasTag = filter.tags.some(tag => node.tags.includes(tag));
                        if (!hasTag) match = false;
                    }
                    
                    if (filter.status && node.status !== filter.status) {
                        match = false;
                    }
                    
                    if (match) results.push(node);
                }
                return results;
            }
            
            subscribe(callback) {
                this.observers.add(callback);
                return () => this.observers.delete(callback);
            }
            
            _notify(change) {
                this.observers.forEach(callback => {
                    try {
                        callback(change);
                    } catch (error) {
                        console.error('Observer error:', error);
                    }
                });
            }
            
            getStats() {
                return {
                    nodeCount: this.nodes.size,
                    observerCount: this.observers.size
                };
            }
        }
        
        // ç®€åŒ–çš„äº‹ä»¶æ€»çº¿
        class SimpleEventBus {
            constructor() {
                this.listeners = new Map();
                this.eventHistory = [];
                this.debugMode = false;
            }
            
            on(eventName, callback) {
                if (!this.listeners.has(eventName)) {
                    this.listeners.set(eventName, []);
                }
                this.listeners.get(eventName).push(callback);
                
                return () => this.off(eventName, callback);
            }
            
            off(eventName, callback) {
                const listeners = this.listeners.get(eventName);
                if (listeners) {
                    const index = listeners.indexOf(callback);
                    if (index !== -1) {
                        listeners.splice(index, 1);
                    }
                }
            }
            
            emit(eventName, data) {
                const eventInfo = {
                    name: eventName,
                    data,
                    timestamp: new Date().toISOString()
                };
                
                this.eventHistory.push(eventInfo);
                
                if (this.debugMode) {
                    console.log(`ğŸšŒ [EventBus] ${eventName}:`, data);
                }
                
                const listeners = this.listeners.get(eventName) || [];
                listeners.forEach(callback => {
                    try {
                        callback(data, eventInfo);
                    } catch (error) {
                        console.error('Event listener error:', error);
                    }
                });
            }
            
            enableDebug() {
                this.debugMode = true;
                console.log('ğŸ› [EventBus] è°ƒè¯•æ¨¡å¼å·²å¯ç”¨');
            }
            
            getStats() {
                return {
                    totalEvents: this.eventHistory.length,
                    activeListeners: this.listeners.size,
                    debugMode: this.debugMode
                };
            }
        }
        
        // ç®€åŒ–çš„æ¨¡å—ç®¡ç†å™¨
        class SimpleModuleManager {
            constructor() {
                this.modules = new Map();
                this.moduleStates = new Map();
                this.isInitialized = false;
            }
            
            register(name, moduleDefinition) {
                this.modules.set(name, moduleDefinition);
                this.moduleStates.set(name, { status: 'registered' });
                console.log(`âœ… [ModuleManager] æ¨¡å—å·²æ³¨å†Œ: ${name}`);
                return true;
            }
            
            async initialize() {
                console.log('ğŸš€ [ModuleManager] å¼€å§‹åˆå§‹åŒ–æ¨¡å—...');
                this.isInitialized = true;
                console.log('âœ… [ModuleManager] æ¨¡å—åˆå§‹åŒ–å®Œæˆ');
                return true;
            }
            
            getStatus() {
                return {
                    isInitialized: this.isInitialized,
                    moduleCount: this.modules.size,
                    loadedCount: this.modules.size,
                    modules: Array.from(this.modules.keys())
                };
            }
        }
        
        // æ ¸å¿ƒç³»ç»Ÿé›†æˆ
        class SimpleNodeMindCore {
            constructor() {
                this.dataStore = new SimpleDataStore();
                this.eventBus = new SimpleEventBus();
                this.moduleManager = new SimpleModuleManager();
                this.isInitialized = false;
                this.version = '4.0.0-simple';
                
                console.log('ğŸš€ [NodeMindCore] NodeMind V4 ç®€åŒ–ç‰ˆæ ¸å¿ƒç³»ç»Ÿå·²åˆ›å»º');
            }
            
            async initialize() {
                if (this.isInitialized) {
                    console.warn('âš ï¸ [NodeMindCore] æ ¸å¿ƒç³»ç»Ÿå·²ç»åˆå§‹åŒ–');
                    return true;
                }
                
                try {
                    console.log('ğŸš€ [NodeMindCore] å¼€å§‹åˆå§‹åŒ–æ ¸å¿ƒç³»ç»Ÿ...');
                    
                    const success = await this.moduleManager.initialize();
                    
                    if (success) {
                        this.isInitialized = true;
                        console.log('âœ… [NodeMindCore] æ ¸å¿ƒç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
                        
                        this.eventBus.emit('system:ready', {
                            version: this.version,
                            timestamp: new Date().toISOString()
                        });
                        
                        return true;
                    }
                    
                } catch (error) {
                    console.error('ğŸš¨ [NodeMindCore] æ ¸å¿ƒç³»ç»Ÿåˆå§‹åŒ–å¼‚å¸¸:', error);
                    return false;
                }
            }
            
            getStatus() {
                return {
                    version: this.version,
                    isInitialized: this.isInitialized,
                    dataStore: this.dataStore.getStats(),
                    eventBus: this.eventBus.getStats(),
                    moduleManager: this.moduleManager.getStatus()
                };
            }
        }
        
        // åˆ›å»ºå…¨å±€æ ¸å¿ƒç³»ç»Ÿå®ä¾‹
        const nodeMindCore = new SimpleNodeMindCore();
        window.nodeMindCore = nodeMindCore;
        
        // ==================== æµ‹è¯•å‡½æ•° ====================
        
        // å·¥å…·å‡½æ•°
        function updateStatus(elementId, message) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            element.textContent += `[${timestamp}] ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }
        
        function updateProgress(percentage) {
            document.getElementById('initProgress').style.width = percentage + '%';
        }
        
        // ç³»ç»Ÿåˆå§‹åŒ–
        async function initializeSystem() {
            updateStatus('initStatus', 'ğŸš€ å¼€å§‹åˆå§‹åŒ–NodeMind V4æ ¸å¿ƒç³»ç»Ÿ...');
            updateProgress(10);
            
            try {
                // ç›‘å¬ç³»ç»Ÿå°±ç»ª
                nodeMindCore.eventBus.on('system:ready', (data) => {
                    updateStatus('initStatus', `âœ… ç³»ç»Ÿå°±ç»ª! ç‰ˆæœ¬: ${data.version}`);
                    updateProgress(100);
                    updateSystemStats();
                });
                
                updateProgress(50);
                const success = await nodeMindCore.initialize();
                
                if (success) {
                    updateStatus('initStatus', 'âœ… æ ¸å¿ƒç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
                    updateProgress(100);
                } else {
                    updateStatus('initStatus', 'âŒ æ ¸å¿ƒç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥');
                }
                
            } catch (error) {
                updateStatus('initStatus', `âŒ åˆå§‹åŒ–å¼‚å¸¸: ${error.message}`);
            }
        }
        
        // è·å–ç³»ç»ŸçŠ¶æ€
        function getSystemStatus() {
            try {
                const status = nodeMindCore.getStatus();
                updateStatus('initStatus', `ğŸ“Š ç³»ç»ŸçŠ¶æ€:\n${JSON.stringify(status, null, 2)}`);
                updateSystemStats();
            } catch (error) {
                updateStatus('initStatus', `âŒ è·å–çŠ¶æ€å¤±è´¥: ${error.message}`);
            }
        }
        
        // æµ‹è¯•æ•°æ®å­˜å‚¨
        function testDataStore() {
            updateStatus('dataStatus', 'ğŸ§ª å¼€å§‹æµ‹è¯•æ•°æ®å­˜å‚¨åŠŸèƒ½...');
            
            try {
                const { dataStore } = nodeMindCore;
                
                // è®¢é˜…æ•°æ®å˜æ›´
                dataStore.subscribe((change) => {
                    updateStatus('dataStatus', `ğŸ“¢ æ•°æ®å˜æ›´: ${change.type} - ${change.target}`);
                });
                
                // æµ‹è¯•èŠ‚ç‚¹åˆ›å»º
                const nodeId = dataStore.createNode({
                    topic: 'æµ‹è¯•èŠ‚ç‚¹',
                    content: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•èŠ‚ç‚¹çš„å†…å®¹',
                    tags: ['æµ‹è¯•', 'V4'],
                    author: 'æµ‹è¯•ç”¨æˆ·'
                });
                
                updateStatus('dataStatus', `âœ… èŠ‚ç‚¹åˆ›å»ºæˆåŠŸ: ${nodeId}`);
                
                // æµ‹è¯•èŠ‚ç‚¹æ›´æ–°
                const updateResult = dataStore.updateNode(nodeId, {
                    content: 'æ›´æ–°åçš„å†…å®¹',
                    tags: ['æµ‹è¯•', 'V4', 'æ›´æ–°']
                });
                
                updateStatus('dataStatus', `âœ… èŠ‚ç‚¹æ›´æ–°: ${updateResult ? 'æˆåŠŸ' : 'å¤±è´¥'}`);
                
                // è·å–ç»Ÿè®¡ä¿¡æ¯
                const stats = dataStore.getStats();
                updateStatus('dataStatus', `ğŸ“Š æ•°æ®ç»Ÿè®¡: èŠ‚ç‚¹æ•°=${stats.nodeCount}, è§‚å¯Ÿè€…æ•°=${stats.observerCount}`);
                
            } catch (error) {
                updateStatus('dataStatus', `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }
        
        // åˆ›å»ºæµ‹è¯•èŠ‚ç‚¹
        function createTestNodes() {
            try {
                const { dataStore } = nodeMindCore;
                const nodeCount = 5;
                
                updateStatus('dataStatus', `ğŸ”„ æ­£åœ¨åˆ›å»º ${nodeCount} ä¸ªæµ‹è¯•èŠ‚ç‚¹...`);
                
                for (let i = 1; i <= nodeCount; i++) {
                    const nodeId = dataStore.createNode({
                        topic: `æµ‹è¯•èŠ‚ç‚¹ ${i}`,
                        content: `è¿™æ˜¯ç¬¬ ${i} ä¸ªæµ‹è¯•èŠ‚ç‚¹çš„å†…å®¹`,
                        tags: ['æ‰¹é‡æµ‹è¯•', `èŠ‚ç‚¹${i}`],
                        status: i % 2 === 0 ? 'completed' : 'pending'
                    });
                    updateStatus('dataStatus', `âœ… åˆ›å»ºèŠ‚ç‚¹ ${i}: ${nodeId}`);
                }
                
                const stats = dataStore.getStats();
                updateStatus('dataStatus', `ğŸ“Š å½“å‰èŠ‚ç‚¹æ€»æ•°: ${stats.nodeCount}`);
                
            } catch (error) {
                updateStatus('dataStatus', `âŒ åˆ›å»ºèŠ‚ç‚¹å¤±è´¥: ${error.message}`);
            }
        }
        
        // æŸ¥è¯¢èŠ‚ç‚¹
        function queryNodes() {
            try {
                const { dataStore } = nodeMindCore;
                
                // æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹
                const allNodes = dataStore.queryNodes();
                updateStatus('dataStatus', `ğŸ” æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹: æ‰¾åˆ° ${allNodes.length} ä¸ªèŠ‚ç‚¹`);
                
                // æŒ‰æ ‡ç­¾æŸ¥è¯¢
                const taggedNodes = dataStore.queryNodes({ tags: ['æµ‹è¯•'] });
                updateStatus('dataStatus', `ğŸ·ï¸ æ ‡ç­¾æŸ¥è¯¢: æ‰¾åˆ° ${taggedNodes.length} ä¸ªåŒ…å«'æµ‹è¯•'æ ‡ç­¾çš„èŠ‚ç‚¹`);
                
                // æŒ‰çŠ¶æ€æŸ¥è¯¢
                const pendingNodes = dataStore.queryNodes({ status: 'pending' });
                updateStatus('dataStatus', `â³ çŠ¶æ€æŸ¥è¯¢: æ‰¾åˆ° ${pendingNodes.length} ä¸ªå¾…å¤„ç†èŠ‚ç‚¹`);
                
            } catch (error) {
                updateStatus('dataStatus', `âŒ æŸ¥è¯¢å¤±è´¥: ${error.message}`);
            }
        }
        
        // æµ‹è¯•äº‹ä»¶æ€»çº¿
        function testEventBus() {
            updateStatus('eventStatus', 'ğŸ§ª å¼€å§‹æµ‹è¯•äº‹ä»¶æ€»çº¿åŠŸèƒ½...');
            
            try {
                const { eventBus } = nodeMindCore;
                
                // æ³¨å†Œæµ‹è¯•äº‹ä»¶ç›‘å¬å™¨
                eventBus.on('test:event', (data) => {
                    updateStatus('eventStatus', `ğŸ“¢ æ”¶åˆ°æµ‹è¯•äº‹ä»¶: ${JSON.stringify(data)}`);
                });
                
                // è§¦å‘æµ‹è¯•äº‹ä»¶
                eventBus.emit('test:event', { message: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•äº‹ä»¶', timestamp: Date.now() });
                
                updateStatus('eventStatus', 'âœ… äº‹ä»¶æ€»çº¿æµ‹è¯•å®Œæˆ');
                
            } catch (error) {
                updateStatus('eventStatus', `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }
        
        // å¯ç”¨äº‹ä»¶è°ƒè¯•
        function enableEventDebug() {
            nodeMindCore.eventBus.enableDebug();
            updateStatus('eventStatus', 'ğŸ› äº‹ä»¶è°ƒè¯•æ¨¡å¼å·²å¯ç”¨');
        }
        
        // è·å–äº‹ä»¶ç»Ÿè®¡
        function getEventStats() {
            try {
                const stats = nodeMindCore.eventBus.getStats();
                updateStatus('eventStatus', `ğŸ“Š äº‹ä»¶ç»Ÿè®¡:\n${JSON.stringify(stats, null, 2)}`);
            } catch (error) {
                updateStatus('eventStatus', `âŒ è·å–ç»Ÿè®¡å¤±è´¥: ${error.message}`);
            }
        }
        
        // æ³¨å†Œæµ‹è¯•æ¨¡å—
        function registerTestModule() {
            updateStatus('moduleStatus', 'ğŸ“¦ æ³¨å†Œæµ‹è¯•æ¨¡å—...');
            
            try {
                const { moduleManager } = nodeMindCore;
                
                // å®šä¹‰æµ‹è¯•æ¨¡å—
                const testModule = {
                    name: 'TestModule',
                    version: '1.0.0',
                    description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¨¡å—'
                };
                
                const success = moduleManager.register('TestModule', testModule);
                updateStatus('moduleStatus', success ? 'âœ… æ¨¡å—æ³¨å†ŒæˆåŠŸ' : 'âŒ æ¨¡å—æ³¨å†Œå¤±è´¥');
                
            } catch (error) {
                updateStatus('moduleStatus', `âŒ æ³¨å†Œå¤±è´¥: ${error.message}`);
            }
        }
        
        // åŠ è½½æµ‹è¯•æ¨¡å—
        function loadTestModule() {
            updateStatus('moduleStatus', 'ğŸ”„ åŠ è½½æµ‹è¯•æ¨¡å—...');
            updateStatus('moduleStatus', 'âœ… æµ‹è¯•æ¨¡å—åŠ è½½å®Œæˆ');
        }
        
        // è·å–æ¨¡å—çŠ¶æ€
        function getModuleStatus() {
            try {
                const status = nodeMindCore.moduleManager.getStatus();
                updateStatus('moduleStatus', `ğŸ“Š æ¨¡å—çŠ¶æ€:\n${JSON.stringify(status, null, 2)}`);
            } catch (error) {
                updateStatus('moduleStatus', `âŒ è·å–çŠ¶æ€å¤±è´¥: ${error.message}`);
            }
        }
        
        // æ›´æ–°ç³»ç»Ÿç»Ÿè®¡
        function updateSystemStats() {
            try {
                const status = nodeMindCore.getStatus();
                const statsGrid = document.getElementById('statsGrid');
                
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <h4>ğŸ—ï¸ ç³»ç»ŸçŠ¶æ€</h4>
                        <div class="stat-value">${status.isInitialized ? 'å·²åˆå§‹åŒ–' : 'æœªåˆå§‹åŒ–'}</div>
                    </div>
                    <div class="stat-card">
                        <h4>ğŸ’¾ æ•°æ®èŠ‚ç‚¹</h4>
                        <div class="stat-value">${status.dataStore.nodeCount}</div>
                    </div>
                    <div class="stat-card">
                        <h4>ğŸšŒ äº‹ä»¶æ€»æ•°</h4>
                        <div class="stat-value">${status.eventBus.totalEvents}</div>
                    </div>
                    <div class="stat-card">
                        <h4>ğŸ“¦ å·²åŠ è½½æ¨¡å—</h4>
                        <div class="stat-value">${status.moduleManager.loadedCount}/${status.moduleManager.moduleCount}</div>
                    </div>
                `;
            } catch (error) {
                console.error('æ›´æ–°ç»Ÿè®¡å¤±è´¥:', error);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus('initStatus', 'ğŸŒŸ NodeMind V4 ç®€åŒ–ç‰ˆæµ‹è¯•é¡µé¢å·²åŠ è½½');
            updateStatus('initStatus', 'ğŸ’¡ ç‚¹å‡»"åˆå§‹åŒ–æ ¸å¿ƒç³»ç»Ÿ"å¼€å§‹æµ‹è¯•');
            updateStatus('initStatus', 'ğŸ“ æ³¨æ„: è¿™æ˜¯ç®€åŒ–ç‰ˆï¼Œä¸ä¾èµ–ES6æ¨¡å—');
            
            // åˆå§‹åŒ–ç»Ÿè®¡æ˜¾ç¤º
            updateSystemStats();
        });
        
    </script>
</body>
</html> 