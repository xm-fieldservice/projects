# ğŸ“ NoteSaver å·¥å…·åŒ…ä½¿ç”¨æ–‡æ¡£

## ğŸ¯ è®¾è®¡ç†å¿µ

NoteSaver æ˜¯ä¸€ä¸ª**ä¸å¯è§†çš„æ ¸å¿ƒä»£ç å·¥å…·åŒ…**ï¼Œå¯ä»¥è¢«ä»»æ„å¤–éƒ¨åº”ç”¨é›†æˆè°ƒç”¨ã€‚å®ƒæä¾›æ ‡å‡†åŒ–çš„ç¬”è®°ä¿å­˜æ¥å£ï¼Œè®©ä»»ä½•ç½‘é¡µã€åº”ç”¨éƒ½èƒ½å¿«é€Ÿé›†æˆç¬”è®°ä¿å­˜åŠŸèƒ½ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ä»»æ„å¤–éƒ¨åº”ç”¨                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è¾“å…¥æ¡†  â”‚ â”‚ æŒ‰é’®   â”‚ â”‚ å¿«æ·é”® â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ è°ƒç”¨API
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      NoteSaver å·¥å…·åŒ…æ ¸å¿ƒ             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ è·¯å¾„é€‰æ‹©                      â”‚ â”‚
â”‚  â”‚  â€¢ å†…å®¹ä¿å­˜                      â”‚ â”‚
â”‚  â”‚  â€¢ å›¾ç‰‡å¤„ç†                      â”‚ â”‚
â”‚  â”‚  â€¢ æ ¼å¼å®šä¹‰                      â”‚ â”‚
â”‚  â”‚  â€¢ æ—¶é—´æˆ³                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ åç«¯API
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         åç«¯æœåŠ¡ + æ–‡ä»¶ç³»ç»Ÿ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¼•å…¥å·¥å…·åŒ…

```html
<!-- åœ¨ä»»æ„HTMLé¡µé¢ä¸­å¼•å…¥ -->
<script src="path/to/note_saver_toolkit/js/note-saver.js"></script>
```

### 2. åŸºç¡€ä½¿ç”¨

```javascript
// åˆ›å»ºå®ä¾‹
const noteSaver = createNoteSaver({
    apiBase: 'http://localhost:5000/api'
});

// é€‰æ‹©ä¿å­˜è·¯å¾„
await noteSaver.selectFilePath();

// ä¿å­˜ç¬”è®°
await noteSaver.saveNote('æˆ‘çš„ç¬”è®°å†…å®¹');
```

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒæ¥å£

#### 1. è·¯å¾„é€‰æ‹©æ¥å£
```javascript
/**
 * æ‰“å¼€æœ¬åœ°æ–‡ä»¶é€‰æ‹©å™¨ï¼Œé€‰æ‹©ä¿å­˜è·¯å¾„
 * @param {Function} callback - é€‰æ‹©å®Œæˆåçš„å›è°ƒå‡½æ•°
 * @returns {Promise<string>} é€‰æ‹©çš„æ–‡ä»¶è·¯å¾„
 */
await noteSaver.selectFilePath((filePath) => {
    console.log('é€‰æ‹©çš„è·¯å¾„:', filePath);
});
```

#### 2. å†…å®¹ä¿å­˜æ¥å£
```javascript
/**
 * ä¿å­˜ç¬”è®°å†…å®¹
 * @param {string} content - ç¬”è®°å†…å®¹
 * @param {Object} options - ä¿å­˜é€‰é¡¹
 * @returns {Promise<Object>} ä¿å­˜ç»“æœ
 */
await noteSaver.saveNote('ç¬”è®°å†…å®¹', {
    appName: 'æˆ‘çš„åº”ç”¨',      // åº”ç”¨åç§°
    format: 'markdown',      // ä¿å­˜æ ¼å¼
    timestamp: true,         // æ˜¯å¦æ·»åŠ æ—¶é—´æˆ³
    images: []              // å›¾ç‰‡æ•°ç»„
});
```

#### 3. æ ¼å¼å®šä¹‰æ¥å£
```javascript
/**
 * è®¾ç½®ä¿å­˜æ ¼å¼
 * @param {string} format - æ ¼å¼ç±»å‹
 * @param {Object} customFormat - è‡ªå®šä¹‰æ ¼å¼é€‰é¡¹
 */
noteSaver.setFormat('markdown', {
    header: '## ',
    timestamp: true
});
```

#### 4. å›¾ç‰‡å¤„ç†æ¥å£
```javascript
/**
 * æ·»åŠ å›¾ç‰‡åˆ°å¾…ä¿å­˜åˆ—è¡¨
 * @param {string|File|Blob} imageData - å›¾ç‰‡æ•°æ®
 * @returns {Promise<string>} Base64å›¾ç‰‡æ•°æ®
 */
const imageData = await noteSaver.addImage(file);
```

#### 5. å‰ªè´´æ¿ç›‘å¬æ¥å£
```javascript
/**
 * ç›‘å¬æŒ‡å®šå…ƒç´ çš„ç²˜è´´äº‹ä»¶
 * @param {HTMLElement} element - è¦ç›‘å¬çš„DOMå…ƒç´ 
 * @param {Function} callback - ç²˜è´´æˆåŠŸå›è°ƒ
 */
noteSaver.listenPaste(inputElement, (imageData, count) => {
    console.log(`ç²˜è´´äº†ç¬¬${count}å¼ å›¾ç‰‡`);
});
```

### å…¨å±€ä¾¿æ·API

```javascript
// å¿«é€Ÿä¿å­˜ï¼ˆè‡ªåŠ¨é€‰æ‹©è·¯å¾„ï¼‰
await quickSaveNote('å†…å®¹');

// å¿«é€Ÿè·¯å¾„é€‰æ‹©
await quickSelectPath();

// åˆ›å»ºå®ä¾‹
const noteSaver = createNoteSaver(options);
```

## ğŸ® ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šåšå®¢ç¼–è¾‘å™¨é›†æˆ

```javascript
// åœ¨åšå®¢ç¼–è¾‘å™¨ä¸­é›†æˆ
const blogEditor = document.getElementById('blog-editor');
const saveBtn = document.getElementById('save-btn');

// åˆ›å»ºNoteSaverå®ä¾‹
const noteSaver = createNoteSaver();

// ç›‘å¬ç²˜è´´äº‹ä»¶
noteSaver.listenPaste(blogEditor, (imageData) => {
    // æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
    showImagePreview(imageData);
});

// ä¿å­˜æŒ‰é’®
saveBtn.addEventListener('click', async () => {
    const content = blogEditor.value;
    await noteSaver.saveNote(content, {
        appName: 'åšå®¢ç¼–è¾‘å™¨',
        format: 'markdown'
    });
});
```

### åœºæ™¯2ï¼šç¬”è®°åº”ç”¨é›†æˆ

```javascript
// åœ¨ç¬”è®°åº”ç”¨ä¸­é›†æˆ
class NoteApp {
    constructor() {
        this.noteSaver = createNoteSaver();
        this.initShortcuts();
    }

    initShortcuts() {
        // Ctrl+S ä¿å­˜
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                this.saveCurrentNote();
            }
        });
    }

    async saveCurrentNote() {
        const content = this.getCurrentContent();
        try {
            await this.noteSaver.saveNote(content, {
                appName: 'ç¬”è®°åº”ç”¨',
                timestamp: true
            });
            this.showStatus('ä¿å­˜æˆåŠŸ');
        } catch (error) {
            this.showStatus('ä¿å­˜å¤±è´¥: ' + error.message);
        }
    }
}
```

### åœºæ™¯3ï¼šèŠå¤©åº”ç”¨è®°å½•

```javascript
// åœ¨èŠå¤©åº”ç”¨ä¸­è®°å½•å¯¹è¯
class ChatRecorder {
    constructor() {
        this.noteSaver = createNoteSaver();
    }

    async recordConversation(messages) {
        const content = messages.map(msg => 
            `**${msg.sender}** (${msg.time}): ${msg.content}`
        ).join('\n\n');

        await this.noteSaver.saveNote(content, {
            appName: 'èŠå¤©è®°å½•å™¨',
            format: 'markdown'
        });
    }
}
```

## ğŸ”§ é…ç½®é€‰é¡¹

```javascript
const noteSaver = createNoteSaver({
    // APIæœåŠ¡å™¨åœ°å€
    apiBase: 'http://localhost:5000/api',
    
    // é»˜è®¤ä¿å­˜æ ¼å¼
    defaultFormat: 'markdown',
    
    // æ˜¯å¦è‡ªåŠ¨æ·»åŠ æ—¶é—´æˆ³
    autoTimestamp: true,
    
    // å…¶ä»–é…ç½®...
});
```

## ğŸ“± æ¼”ç¤ºé¡µé¢

æˆ‘ä»¬æä¾›äº†å®Œæ•´çš„æ¼”ç¤ºé¡µé¢ï¼Œå±•ç¤ºæ‰€æœ‰åŠŸèƒ½ï¼š

```bash
# å¯åŠ¨åç«¯æœåŠ¡
python run_simple_demo.py

# è®¿é—®æ¼”ç¤ºé¡µé¢
http://localhost:8080/frontend/demo.html
```

æ¼”ç¤ºé¡µé¢åŒ…å«ï¼š
- âœ… å·¥å…·åŒ…çŠ¶æ€æ˜¾ç¤º
- âœ… è·¯å¾„é€‰æ‹©åŠŸèƒ½
- âœ… å†…å®¹è¾“å…¥å’Œå›¾ç‰‡ç²˜è´´
- âœ… ä¿å­˜åŠ¨ä½œæ¼”ç¤º
- âœ… æ ¼å¼å®šä¹‰æ¼”ç¤º
- âœ… å…¨å±€APIæ¼”ç¤º

## ğŸš¨ æ³¨æ„äº‹é¡¹

### æµè§ˆå™¨å®‰å…¨é™åˆ¶
- å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨æ— æ³•è·å–å®Œæ•´çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„
- æ–‡ä»¶é€‰æ‹©å™¨åªèƒ½è¿”å›æ–‡ä»¶åï¼Œä¸èƒ½è¿”å›å®Œæ•´è·¯å¾„
- å®é™…ä¿å­˜è·¯å¾„ç”±åç«¯æœåŠ¡ç®¡ç†

### è·¨åŸŸé—®é¢˜
- ç¡®ä¿åç«¯æœåŠ¡æ”¯æŒCORS
- æˆ–å°†å‰ç«¯é¡µé¢ä¸åç«¯æœåŠ¡éƒ¨ç½²åœ¨åŒåŸŸä¸‹

### ä¾èµ–è¦æ±‚
- éœ€è¦åç«¯APIæœåŠ¡è¿è¡Œåœ¨æŒ‡å®šç«¯å£
- éœ€è¦ç°ä»£æµè§ˆå™¨æ”¯æŒES6+

## ğŸ”„ é›†æˆæµç¨‹

### 1. å¤–éƒ¨åº”ç”¨å‡†å¤‡
```javascript
// 1. å¼•å…¥å·¥å…·åŒ…
<script src="note-saver.js"></script>

// 2. åˆ›å»ºå®ä¾‹
const noteSaver = createNoteSaver();

// 3. ç»‘å®šäº‹ä»¶
element.addEventListener('paste', () => {
    // è°ƒç”¨å·¥å…·åŒ…API
});
```

### 2. æ ¸å¿ƒæ¥å£è°ƒç”¨
```javascript
// è·¯å¾„é€‰æ‹©
const path = await noteSaver.selectFilePath();

// å†…å®¹ä¿å­˜
const result = await noteSaver.saveNote(content);

// å›¾ç‰‡å¤„ç†
await noteSaver.addImage(imageFile);
```

### 3. ç»“æœå¤„ç†
```javascript
try {
    const result = await noteSaver.saveNote(content);
    showSuccess(result.message);
} catch (error) {
    showError(error.message);
}
```

## ğŸ¨ è‡ªå®šä¹‰æ‰©å±•

### è‡ªå®šä¹‰ä¿å­˜æ ¼å¼
```javascript
noteSaver.setFormat('custom', {
    header: (title, timestamp) => `# ${title}\n> ${timestamp}\n\n`,
    content: (text) => text,
    footer: () => '\n---\n*Generated by MyApp*'
});
```

### è‡ªå®šä¹‰å›¾ç‰‡å¤„ç†
```javascript
class CustomNoteSaver extends NoteSaver {
    async processImage(imageData) {
        // è‡ªå®šä¹‰å›¾ç‰‡å¤„ç†é€»è¾‘
        const compressed = await this.compressImage(imageData);
        return compressed;
    }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ğŸš€ å›¾ç‰‡è‡ªåŠ¨å‹ç¼©
- ğŸ“¦ æŒ‰éœ€åŠ è½½æ¨¡å—
- ğŸ’¾ æœ¬åœ°ç¼“å­˜é…ç½®
- ğŸ”„ å¼‚æ­¥APIè°ƒç”¨

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

- ğŸ“– å®Œæ•´æ–‡æ¡£ï¼š[README.md](README.md)
- ğŸ® æ¼”ç¤ºé¡µé¢ï¼š[demo.html](frontend/demo.html)
- ğŸ”§ APIæ¥å£ï¼š[note-saver.js](note_saver_toolkit/js/note-saver.js)
- ğŸ› é—®é¢˜åé¦ˆï¼šæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

**ğŸ‰ äº«å—æ¨¡å—åŒ–ã€å¯é›†æˆçš„ç¬”è®°ä¿å­˜ä½“éªŒï¼** 